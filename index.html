<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Yakıt Maliyeti Hesaplayıcı</title>
  <style>
    :root { --radius: 16px; --pad: 16px; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; padding: 24px; background: #f6f7f9; }
    .app { max-width: 560px; margin: 0 auto; background: white; border-radius: var(--radius); box-shadow: 0 6px 20px rgba(0,0,0,.06); padding: 24px; }
    h1 { font-size: 20px; margin: 0 0 8px; }
    p.help { margin: 0 0 16px; color: #555; }
    form { display: grid; gap: 12px; }
    label { font-size: 13px; color: #333; }
    .row { display: grid; grid-template-columns: 1fr 120px; gap: 12px; align-items: end; }
    input[type="number"] { width: 100%; padding: 12px; border: 1px solid #d7dbe2; border-radius: 12px; font-size: 16px; }
    input[type="number"]:focus { outline: none; border-color: #4c8bf5; box-shadow: 0 0 0 3px rgba(76,139,245,.15); }
    button { padding: 12px 16px; border: 0; border-radius: 12px; background: black; color: white; font-weight: 600; cursor: pointer; }
    button:disabled { opacity: .6; cursor: not-allowed; }
    .results { margin-top: 18px; display: grid; gap: 8px; padding: 16px; border: 1px dashed #d7dbe2; border-radius: 12px; background: #fafbfc; }
    .resline { display: flex; justify-content: space-between; }
    .muted { color: #666; font-size: 14px; }
    footer { margin-top: 18px; font-size: 12px; color: #777; text-align: center; }
  </style>
</head>
<body>
  <div class="app">
    <h1>Yakıt Maliyeti Hesaplayıcı</h1>
    <p class="help">Litre fiyatını (TL), ortalama tüketimi (L/100 km) ve mesafeyi (km) gir; toplam maliyeti hesaplayalım.</p>

    <form id="form" autocomplete="off">
      <div class="row">
        <div>
          <label for="price">Litre Fiyatı (TL/L)</label>
          <input id="price" type="number" step="0.01" min="0" placeholder="örn. 51" required />
        </div>
        <div>
          <label for="distance">Mesafe (km)</label>
          <input id="distance" type="number" step="0.1" min="0" placeholder="örn. 15" required />
        </div>
      </div>

      <div class="row">
        <div>
          <label for="consumption">Ortalama Tüketim (L/100 km)</label>
          <input id="consumption" type="number" step="0.1" min="0" placeholder="örn. 6.3" required />
        </div>
        <div>
          <label for="currency">Para Birimi</label>
          <input id="currency" type="text" value="TL" maxlength="6" />
        </div>
      </div>

      <button id="calc" type="submit">Hesapla</button>
      <button id="clear" type="button" style="background:#e6e9ef;color:#111">Sıfırla</button>
    </form>

    <div class="results" id="results" hidden>
      <div class="resline"><span>Toplam Maliyet</span> <strong id="cost">—</strong></div>
      <div class="resline"><span>Tahmini Yakıt (L)</span> <strong id="liters">—</strong></div>
      <div class="resline muted"><span>Km başına maliyet</span> <span id="perkm">—</span></div>
    </div>

    <footer>Form değerleri tarayıcıda saklanır (localStorage). Sunucu yok, veriler paylaşılmaz.</footer>
  </div>

  <script>
    const el = (id) => document.getElementById(id);
    const price = el('price');
    const distance = el('distance');
    const consumption = el('consumption');
    const currency = el('currency');
    const resultsBox = el('results');
    const costOut = el('cost');
    const litersOut = el('liters');
    const perkmOut = el('perkm');

    // Basit sayı formatlayıcı
    const fmt = (n, unit='') => {
      if (!isFinite(n)) return '—';
      return new Intl.NumberFormat('tr-TR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(n) + (unit ? ' ' + unit : '');
    };

    function compute() {
      const p = parseFloat(price.value);
      const d = parseFloat(distance.value);
      const c = parseFloat(consumption.value);
      if ([p,d,c].some(x => !isFinite(x) || x < 0)) { resultsBox.hidden = true; return; }

      // Litre = (tüketim/100)*mesafe
      const liters = (c/100) * d;
      const cost = p * liters;
      const perkm = cost / d;

      costOut.textContent = fmt(cost, currency.value || 'TL');
      litersOut.textContent = fmt(liters, 'L');
      perkmOut.textContent = fmt(perkm, currency.value || 'TL') + ' / km';
      resultsBox.hidden = false;
    }

    // Formu gönderince hesapla ve değerleri kaydet
    el('form').addEventListener('submit', (e) => {
      e.preventDefault();
      saveState();
      compute();
    });

    // Sıfırla
    el('clear').addEventListener('click', () => {
      price.value = distance.value = consumption.value = '';
      resultsBox.hidden = true;
      localStorage.removeItem('yakithesap:v1');
    });

    // Local storage ile otomatik doldurma
    function saveState() {
      const data = { price: price.value, distance: distance.value, consumption: consumption.value, currency: currency.value };
      localStorage.setItem('yakithesap:v1', JSON.stringify(data));
    }
    function loadState() {
      try {
        const data = JSON.parse(localStorage.getItem('yakithesap:v1') || '{}');
        if (data.price) price.value = data.price;
        if (data.distance) distance.value = data.distance;
        if (data.consumption) consumption.value = data.consumption;
        if (data.currency) currency.value = data.currency;
        if (data.price && data.distance && data.consumption) compute();
      } catch {}
    }
    loadState();

    // Değer değişince anlık hesap için (isteğe bağlı)
    [price, distance, consumption, currency].forEach(i => i.addEventListener('input', () => {
      saveState(); compute();
    }));
  </script>
</body>
</html>
